public ZoomHandler() { [EOL]     super(); [EOL] } <line_num>: 64,66
public void mousePressed(MouseEvent e) { [EOL]     ChartPanel chartPanel = (ChartPanel) e.getSource(); [EOL]     Rectangle2D screenDataArea = chartPanel.getScreenDataArea(e.getX(), e.getY()); [EOL]     if (screenDataArea != null) { [EOL]         this.zoomPoint = ShapeUtilities.getPointInRectangle(e.getX(), e.getY(), screenDataArea); [EOL]     } else { [EOL]         this.zoomPoint = null; [EOL]     } [EOL] } <line_num>: 68,79
public void mouseDragged(MouseEvent e) { [EOL]     if (this.zoomPoint == null) { [EOL]         return; [EOL]     } [EOL]     ChartPanel panel = (ChartPanel) e.getSource(); [EOL]     Graphics2D g2 = (Graphics2D) panel.getGraphics(); [EOL]     if (!panel.getUseBuffer()) { [EOL]         drawZoomRectangle(panel, g2, true); [EOL]     } [EOL]     boolean hZoom = false; [EOL]     boolean vZoom = false; [EOL]     if (panel.getOrientation() == PlotOrientation.HORIZONTAL) { [EOL]         hZoom = panel.isRangeZoomable(); [EOL]         vZoom = panel.isDomainZoomable(); [EOL]     } else { [EOL]         hZoom = panel.isDomainZoomable(); [EOL]         vZoom = panel.isRangeZoomable(); [EOL]     } [EOL]     Rectangle2D scaledDataArea = panel.getScreenDataArea((int) this.zoomPoint.getX(), (int) this.zoomPoint.getY()); [EOL]     if (hZoom && vZoom) { [EOL]         double xmax = Math.min(e.getX(), scaledDataArea.getMaxX()); [EOL]         double ymax = Math.min(e.getY(), scaledDataArea.getMaxY()); [EOL]         this.zoomRectangle = new Rectangle2D.Double(this.zoomPoint.getX(), this.zoomPoint.getY(), xmax - this.zoomPoint.getX(), ymax - this.zoomPoint.getY()); [EOL]     } else if (hZoom) { [EOL]         double xmax = Math.min(e.getX(), scaledDataArea.getMaxX()); [EOL]         this.zoomRectangle = new Rectangle2D.Double(this.zoomPoint.getX(), scaledDataArea.getMinY(), xmax - this.zoomPoint.getX(), scaledDataArea.getHeight()); [EOL]     } else if (vZoom) { [EOL]         double ymax = Math.min(e.getY(), scaledDataArea.getMaxY()); [EOL]         this.zoomRectangle = new Rectangle2D.Double(scaledDataArea.getMinX(), this.zoomPoint.getY(), scaledDataArea.getWidth(), ymax - this.zoomPoint.getY()); [EOL]     } [EOL]     panel.setZoomRectangle(this.zoomRectangle); [EOL]     if (panel.getUseBuffer()) { [EOL]         panel.repaint(); [EOL]     } else { [EOL]         drawZoomRectangle(panel, g2, true); [EOL]     } [EOL]     g2.dispose(); [EOL] } <line_num>: 81,141
public void mouseReleased(MouseEvent e) { [EOL]     if (this.zoomRectangle == null) { [EOL]         return; [EOL]     } [EOL]     ChartPanel panel = (ChartPanel) e.getSource(); [EOL]     boolean hZoom = false; [EOL]     boolean vZoom = false; [EOL]     if (panel.getOrientation() == PlotOrientation.HORIZONTAL) { [EOL]         hZoom = panel.isRangeZoomable(); [EOL]         vZoom = panel.isDomainZoomable(); [EOL]     } else { [EOL]         hZoom = panel.isDomainZoomable(); [EOL]         vZoom = panel.isRangeZoomable(); [EOL]     } [EOL]     boolean zoomTrigger1 = hZoom && Math.abs(e.getX() - this.zoomPoint.getX()) >= panel.getZoomTriggerDistance(); [EOL]     boolean zoomTrigger2 = vZoom && Math.abs(e.getY() - this.zoomPoint.getY()) >= panel.getZoomTriggerDistance(); [EOL]     if (zoomTrigger1 || zoomTrigger2) { [EOL]         if ((hZoom && (e.getX() < this.zoomPoint.getX())) || (vZoom && (e.getY() < this.zoomPoint.getY()))) { [EOL]             panel.restoreAutoBounds(); [EOL]         } else { [EOL]             double x, y, w, h; [EOL]             Rectangle2D screenDataArea = panel.getScreenDataArea((int) this.zoomPoint.getX(), (int) this.zoomPoint.getY()); [EOL]             double maxX = screenDataArea.getMaxX(); [EOL]             double maxY = screenDataArea.getMaxY(); [EOL]             if (!vZoom) { [EOL]                 x = this.zoomPoint.getX(); [EOL]                 y = screenDataArea.getMinY(); [EOL]                 w = Math.min(this.zoomRectangle.getWidth(), maxX - this.zoomPoint.getX()); [EOL]                 h = screenDataArea.getHeight(); [EOL]             } else if (!hZoom) { [EOL]                 x = screenDataArea.getMinX(); [EOL]                 y = this.zoomPoint.getY(); [EOL]                 w = screenDataArea.getWidth(); [EOL]                 h = Math.min(this.zoomRectangle.getHeight(), maxY - this.zoomPoint.getY()); [EOL]             } else { [EOL]                 x = this.zoomPoint.getX(); [EOL]                 y = this.zoomPoint.getY(); [EOL]                 w = Math.min(this.zoomRectangle.getWidth(), maxX - this.zoomPoint.getX()); [EOL]                 h = Math.min(this.zoomRectangle.getHeight(), maxY - this.zoomPoint.getY()); [EOL]             } [EOL]             Rectangle2D zoomArea = new Rectangle2D.Double(x, y, w, h); [EOL]             panel.zoom(zoomArea); [EOL]         } [EOL]         this.zoomPoint = null; [EOL]         this.zoomRectangle = null; [EOL]         panel.setZoomRectangle(null); [EOL]         panel.clearLiveMouseHandler(); [EOL]     } else { [EOL]         Graphics2D g2 = (Graphics2D) panel.getGraphics(); [EOL]         if (panel.getUseBuffer()) { [EOL]             panel.repaint(); [EOL]         } else { [EOL]             drawZoomRectangle(panel, g2, true); [EOL]         } [EOL]         g2.dispose(); [EOL]         this.zoomPoint = null; [EOL]         this.zoomRectangle = null; [EOL]         panel.setZoomRectangle(null); [EOL]         panel.clearLiveMouseHandler(); [EOL]     } [EOL] } <line_num>: 143,224
private void drawZoomRectangle(ChartPanel panel, Graphics2D g2, boolean xor) { [EOL]     if (this.zoomRectangle != null) { [EOL]         if (xor) { [EOL]             g2.setXORMode(Color.gray); [EOL]         } [EOL]         if (panel.getFillZoomRectangle()) { [EOL]             g2.setPaint(panel.getZoomFillPaint()); [EOL]             g2.fill(this.zoomRectangle); [EOL]         } else { [EOL]             g2.setPaint(panel.getZoomOutlinePaint()); [EOL]             g2.draw(this.zoomRectangle); [EOL]         } [EOL]         if (xor) { [EOL]             g2.setPaintMode(); [EOL]         } [EOL]     } [EOL] } <line_num>: 236,256
