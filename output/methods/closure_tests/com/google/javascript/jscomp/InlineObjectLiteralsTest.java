public InlineObjectLiteralsTest() { [EOL]     enableNormalize(); [EOL] } <line_num>: 26,28
@Override [EOL] public void setUp() { [EOL]     super.enableLineNumberCheck(true); [EOL] } <line_num>: 30,33
@Override [EOL] protected CompilerPass getProcessor(final Compiler compiler) { [EOL]     return new InlineObjectLiterals(compiler, compiler.getUniqueNameIdSupplier()); [EOL] } <line_num>: 35,40
public void testObject0() { [EOL]     testSame("var a = {x:1}; f(a.x);"); [EOL] } <line_num>: 44,47
public void testObject1() { [EOL]     testLocal("var a = {x:x(), y:y()}; f(a.x, a.y);", "var JSCompiler_object_inline_x_0=x();" + "var JSCompiler_object_inline_y_1=y();" + "f(JSCompiler_object_inline_x_0, JSCompiler_object_inline_y_1);"); [EOL] } <line_num>: 49,54
public void testObject1a() { [EOL]     testLocal("var a; a = {x:x, y:y}; f(a.x, a.y);", "var JSCompiler_object_inline_x_0;" + "var JSCompiler_object_inline_y_1;" + "(JSCompiler_object_inline_x_0=x," + "JSCompiler_object_inline_y_1=y, true);" + "f(JSCompiler_object_inline_x_0, JSCompiler_object_inline_y_1);"); [EOL] } <line_num>: 56,63
public void testObject2() { [EOL]     testLocal("var a = {y:y}; a.x = z; f(a.x, a.y);", "var JSCompiler_object_inline_y_0 = y;" + "var JSCompiler_object_inline_x_1;" + "JSCompiler_object_inline_x_1=z;" + "f(JSCompiler_object_inline_x_1, JSCompiler_object_inline_y_0);"); [EOL] } <line_num>: 65,71
public void testObject3() { [EOL]     testSameLocal("var a = {y:y,x:x}; a.y(); f(a.x);"); [EOL]     testSameLocal("var a; a = {y:y,x:x}; a.y(); f(a.x);"); [EOL] } <line_num>: 73,78
public void testObject4() { [EOL]     testSameLocal("var a = {y:y}; a.x = z; f(a.x, a.y); g(a);"); [EOL]     testSameLocal("var a; a = {y:y}; a.x = z; f(a.x, a.y); g(a);"); [EOL] } <line_num>: 80,84
public void testObject5() { [EOL]     testLocal("var a = {x:x, y:y}; var b = {a:a}; f(b.a.x, b.a.y);", "var a = {x:x, y:y};" + "var JSCompiler_object_inline_a_0=a;" + "f(JSCompiler_object_inline_a_0.x, JSCompiler_object_inline_a_0.y);"); [EOL] } <line_num>: 86,91
public void testObject6() { [EOL]     testLocal("for (var i = 0; i < 5; i++) { var a = {i:i,x:x}; f(a.i, a.x); }", "for (var i = 0; i < 5; i++) {" + "  var JSCompiler_object_inline_i_0=i;" + "  var JSCompiler_object_inline_x_1=x;" + "  f(JSCompiler_object_inline_i_0,JSCompiler_object_inline_x_1)" + "}"); [EOL]     testLocal("if (c) { var a = {i:i,x:x}; f(a.i, a.x); }", "if (c) {" + "  var JSCompiler_object_inline_i_0=i;" + "  var JSCompiler_object_inline_x_1=x;" + "  f(JSCompiler_object_inline_i_0,JSCompiler_object_inline_x_1)" + "}"); [EOL] } <line_num>: 93,106
public void testObject7() { [EOL]     testLocal("var a = {x:x, y:f()}; g(a.x);", "var JSCompiler_object_inline_x_0=x;" + "var JSCompiler_object_inline_y_1=f();" + "g(JSCompiler_object_inline_x_0)"); [EOL] } <line_num>: 108,113
public void testObject8() { [EOL]     testSameLocal("var a = {x:x,y:y}; var b = {x:y}; f((c?a:b).x);"); [EOL]     testLocal("var a; if(c) { a={x:x, y:y}; } else { a={x:y}; } f(a.x);", "var JSCompiler_object_inline_x_0;" + "var JSCompiler_object_inline_y_1;" + "if(c) JSCompiler_object_inline_x_0=x," + "      JSCompiler_object_inline_y_1=y," + "      true;" + "else JSCompiler_object_inline_x_0=y," + "     JSCompiler_object_inline_y_1=void 0," + "     true;" + "f(JSCompiler_object_inline_x_0)"); [EOL]     testLocal("var a = {x:x,y:y}; var b = {x:y}; c ? f(a.x) : f(b.x);", "var JSCompiler_object_inline_x_0 = x; " + "var JSCompiler_object_inline_y_1 = y; " + "var JSCompiler_object_inline_x_2 = y; " + "c ? f(JSCompiler_object_inline_x_0):f(JSCompiler_object_inline_x_2)"); [EOL] } <line_num>: 115,133
public void testObject9() { [EOL]     testSameLocal("function f(a,b) {" + "  var x = {a:a,b:b}; x.a(); return x.b;" + "}"); [EOL]     testLocal("function f(a,b) {" + "  var x = {a:a,b:b}; g(x.a); x = {a:a,b:2}; return x.b;" + "}", "function f(a,b) {" + "  var JSCompiler_object_inline_a_0 = a;" + "  var JSCompiler_object_inline_b_1 = b;" + "  g(JSCompiler_object_inline_a_0);" + "  JSCompiler_object_inline_a_0 = a," + "  JSCompiler_object_inline_b_1=2," + "  true;" + "  return JSCompiler_object_inline_b_1" + "}"); [EOL]     testLocal("function f(a,b) { " + "  var x = {a:a,b:b}; g(x.a); x.b = x.c = 2; return x.b; " + "}", "function f(a,b) { " + "  var JSCompiler_object_inline_a_0=a;" + "  var JSCompiler_object_inline_b_1=b; " + "  var JSCompiler_object_inline_c_2;" + "  g(JSCompiler_object_inline_a_0);" + "  JSCompiler_object_inline_b_1=JSCompiler_object_inline_c_2=2;" + "  return JSCompiler_object_inline_b_1" + "}"); [EOL] } <line_num>: 135,165
public void testObject10() { [EOL]     testLocal("var x; var b = f(); x = {a:a, b:b}; if(x.a) g(x.b);", "var JSCompiler_object_inline_a_0;" + "var JSCompiler_object_inline_b_1;" + "var b = f();" + "JSCompiler_object_inline_a_0=a,JSCompiler_object_inline_b_1=b,true;" + "if(JSCompiler_object_inline_a_0) g(JSCompiler_object_inline_b_1)"); [EOL]     testLocal("var x = {}; var b = f(); x = {a:a, b:b}; if(x.a) g(x.b) + x.c", "var x = {}; var b = f(); x = {a:a, b:b}; if(x.a) g(x.b) + x.c"); [EOL]     testLocal("var x; var b = f(); x = {a:a, b:b}; x.c = c; if(x.a) g(x.b) + x.c", "var JSCompiler_object_inline_a_0;" + "var JSCompiler_object_inline_b_1;" + "var JSCompiler_object_inline_c_2;" + "var b = f();" + "JSCompiler_object_inline_a_0 = a,JSCompiler_object_inline_b_1 = b, " + "  JSCompiler_object_inline_c_2=void 0,true;" + "JSCompiler_object_inline_c_2 = c;" + "if (JSCompiler_object_inline_a_0)" + "  g(JSCompiler_object_inline_b_1) + JSCompiler_object_inline_c_2;"); [EOL]     testLocal("var x = {a:a}; if (b) x={b:b}; f(x.a||x.b);", "var JSCompiler_object_inline_a_0 = a;" + "var JSCompiler_object_inline_b_1;" + "if(b) JSCompiler_object_inline_b_1 = b," + "      JSCompiler_object_inline_a_0 = void 0," + "      true;" + "f(JSCompiler_object_inline_a_0 || JSCompiler_object_inline_b_1)"); [EOL]     testLocal("var x; var y = 5; x = {a:a, b:b, c:c}; if (b) x={b:b}; f(x.a||x.b);", "var JSCompiler_object_inline_a_0;" + "var JSCompiler_object_inline_b_1;" + "var JSCompiler_object_inline_c_2;" + "var y=5;" + "JSCompiler_object_inline_a_0=a," + "JSCompiler_object_inline_b_1=b," + "JSCompiler_object_inline_c_2=c," + "true;" + "if (b) JSCompiler_object_inline_b_1=b," + "       JSCompiler_object_inline_a_0=void 0," + "       JSCompiler_object_inline_c_2=void 0," + "       true;" + "f(JSCompiler_object_inline_a_0||JSCompiler_object_inline_b_1)"); [EOL] } <line_num>: 167,207
public void testObject11() { [EOL]     testSameLocal("var x = {a:b}; (x = {a:a}).c = 5; f(x.a);"); [EOL]     testSameLocal("var x = {a:a}; f(x[a]); g(x[a]);"); [EOL] } <line_num>: 209,212
public void testObject12() { [EOL]     testLocal("var a; a = {x:1, y:2}; f(a.x, a.y2);", "var a; a = {x:1, y:2}; f(a.x, a.y2);"); [EOL] } <line_num>: 214,217
public void testObject13() { [EOL]     testSameLocal("var x = {a:1, b:2}; x = {a:3, b:x.a};"); [EOL] } <line_num>: 219,221
public void testObject14() { [EOL]     testSameLocal("var x = {a:1}; if ('a' in x) { f(); }"); [EOL]     testSameLocal("var x = {a:1}; for (var y in x) { f(y); }"); [EOL] } <line_num>: 223,226
public void testObject15() { [EOL]     testSameLocal("x = x || {}; f(x.a);"); [EOL] } <line_num>: 228,230
public void testObject16() { [EOL]     testLocal("function f(e) { bar(); x = {a: foo()}; var x; print(x.a); }", "function f(e) { " + "  var JSCompiler_object_inline_a_0;" + "  bar();" + "  JSCompiler_object_inline_a_0 = foo(), true;" + "  print(JSCompiler_object_inline_a_0);" + "}"); [EOL] } <line_num>: 232,240
public void testObject17() { [EOL]     testSameLocal("var a = {a: function(){}};" + "a.a();" + "a = {a1: 100};" + "print(a.a1);"); [EOL] } <line_num>: 242,250
public void testObject18() { [EOL]     testSameLocal("var a,b; b=a={x:x, y:y}; f(b.x);"); [EOL] } <line_num>: 252,254
public void testObject19() { [EOL]     testSameLocal("var a,b; if(c) { b=a={x:x, y:y}; } else { b=a={x:y}; } f(b.x);"); [EOL] } <line_num>: 256,258
public void testObject20() { [EOL]     testSameLocal("var a,b; if(c) { b=a={x:x, y:y}; } else { b=a={x:y}; } f(a.x);"); [EOL] } <line_num>: 260,262
public void testObject21() { [EOL]     testSameLocal("var a,b; b=a={x:x, y:y};"); [EOL]     testSameLocal("var a,b; if(c) { b=a={x:x, y:y}; }" + "else { b=a={x:y}; } f(a.x); f(b.x)"); [EOL]     testSameLocal("var a, b; if(c) { if (a={x:x, y:y}) f(); } " + "else { b=a={x:y}; } f(a.x);"); [EOL]     testSameLocal("var a,b; b = (a = {x:x, y:x});"); [EOL]     testSameLocal("var a,b; a = {x:x, y:x}; b = a"); [EOL]     testSameLocal("var a,b; a = {x:x, y:x}; b = x || a"); [EOL]     testSameLocal("var a,b; a = {x:x, y:x}; b = y && a"); [EOL]     testSameLocal("var a,b; a = {x:x, y:x}; b = y ? a : a"); [EOL]     testSameLocal("var a,b; a = {x:x, y:x}; b = y , a"); [EOL]     testSameLocal("b = x || (a = {x:1, y:2});"); [EOL] } <line_num>: 264,277
public void testObject22() { [EOL]     testLocal("while(1) { var a = {y:1}; if (b) a.x = 2; f(a.y, a.x);}", "for(;1;){" + " var JSCompiler_object_inline_y_0=1;" + " var JSCompiler_object_inline_x_1;" + " if(b) JSCompiler_object_inline_x_1=2;" + " f(JSCompiler_object_inline_y_0,JSCompiler_object_inline_x_1)" + "}"); [EOL]     testLocal("var a; while (1) { f(a.x, a.y); a = {x:1, y:1};}", "var a; while (1) { f(a.x, a.y); a = {x:1, y:1};}"); [EOL] } <line_num>: 279,290
public void testObject23() { [EOL]     testLocal("function f() {\n" + "  var templateData = {\n" + "    linkIds: {\n" + "      CHROME: 'cl',\n" + "      DISMISS: 'd'\n" + "    }\n" + "  };\n" + "  var html = templateData.linkIds.CHROME \n" + "       + \":\" + templateData.linkIds.DISMISS;\n" + "}", "function f(){" + "var JSCompiler_object_inline_CHROME_1='cl';" + "var JSCompiler_object_inline_DISMISS_2='d';" + "var html=JSCompiler_object_inline_CHROME_1 +" + " ':' +JSCompiler_object_inline_DISMISS_2}"); [EOL] } <line_num>: 292,308
public void testObject24() { [EOL]     testLocal("function f() {\n" + "  var linkIds = {\n" + "      CHROME: 1,\n" + "  };\n" + "  var g = function () {var o = {a: linkIds};}\n" + "}", "function f(){var linkIds={CHROME:1};" + "var g=function(){var JSCompiler_object_inline_a_0=linkIds}}"); [EOL] } <line_num>: 310,319
public void testObject25() { [EOL]     testLocal("var a = {x:f(), y:g()}; a = {y:g(), x:f()}; f(a.x, a.y);", "var JSCompiler_object_inline_x_0=f();" + "var JSCompiler_object_inline_y_1=g();" + "JSCompiler_object_inline_y_1=g()," + "  JSCompiler_object_inline_x_0=f()," + "  true;" + "f(JSCompiler_object_inline_x_0,JSCompiler_object_inline_y_1)"); [EOL] } <line_num>: 321,329
public void testObject26() { [EOL]     testLocal("var a = {}; a.b = function() {}; new a.b.c", "var JSCompiler_object_inline_b_0;" + "JSCompiler_object_inline_b_0=function(){};" + "new JSCompiler_object_inline_b_0.c"); [EOL] } <line_num>: 331,336
public void testBug545() { [EOL]     testLocal("var a = {}", ""); [EOL]     testLocal("var a; a = {}", "true"); [EOL] } <line_num>: 338,341
public void testIssue724() { [EOL]     testSameLocal("var getType; getType = {};" + "return functionToCheck && " + "   getType.toString.apply(functionToCheck) === " + "   '[object Function]';"); [EOL] } <line_num>: 343,349
public void testNoInlineDeletedProperties() { [EOL]     testSameLocal("var foo = {bar:1};" + "delete foo.bar;" + "return foo.bar;"); [EOL] } <line_num>: 351,356
private void testLocal(String code, String result) { [EOL]     test(LOCAL_PREFIX + code + LOCAL_POSTFIX, LOCAL_PREFIX + result + LOCAL_POSTFIX); [EOL] } <line_num>: 361,364
private void testSameLocal(String code) { [EOL]     testLocal(code, code); [EOL] } <line_num>: 366,368
