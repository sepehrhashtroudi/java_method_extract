@Override [EOL] protected CompilerPass getProcessor(Compiler compiler) { [EOL]     return new TransformAMDToCJSModule(compiler); [EOL] } <line_num>: 24,26
@Override [EOL] protected int getNumRepetitions() { [EOL]     return 1; [EOL] } <line_num>: 28,31
public void testDefine() { [EOL]     test("define(['foo', 'bar'], function(foo, bar) { foo(bar); bar+1; })", "var foo=require('foo'); var bar=require('bar');foo(bar);bar+1"); [EOL]     test("define(['foo', 'bar'], function(foo, bar, baz) { foo(bar); bar+1; })", "var foo=require('foo'); var bar=require('bar');" + "var baz = null;foo(bar);bar+1"); [EOL]     test("define(['foo', 'bar'], function(foo, bar) { return { test: 1 } })", "var foo=require('foo'); var bar=require('bar');" + "module.exports={test:1}"); [EOL]     test("define(['foo', 'bar'], function(foo, bar, exports) { " + "return { test: 1 } })", "var foo=require('foo'); var bar=require('bar');" + "module.exports={test:1}"); [EOL]     test("define(['foo', 'bar'], function(foo, bar, exports, module) { " + "return { test: 1 } })", "var foo=require('foo'); var bar=require('bar');" + "module.exports={test:1}"); [EOL]     test("define(['foo', 'bar'], function(foo, bar, exports, module, baz) { " + "return { test: 1 } })", "var foo=require('foo'); var bar=require('bar');var baz = null;" + "module.exports={test:1}"); [EOL]     test("define(['foo', 'bar'], function(foo) { return { test: 1 } })", "var foo=require('foo'); require('bar'); module.exports={test:1}"); [EOL]     test("define(['foo', 'bar'], function(test) { return { test: 1 } })", "var test=require('foo'); require('bar'); module.exports={test:1}"); [EOL] } <line_num>: 33,58
public void testVarRenaming() { [EOL]     final String suffix = TransformAMDToCJSModule.VAR_RENAME_SUFFIX; [EOL]     test("var foo; define(['foo', 'bar'], function(foo, bar) { " + "foo(bar); bar+1; })", "var foo; var foo" + suffix + "0=require('foo');" + "var bar=require('bar');foo" + suffix + "0(bar);bar+1"); [EOL]     test("function foo() {}; define(['foo', 'bar'], " + "function(foo, bar) { foo(bar); bar+1; })", "function foo() {}; var foo" + suffix + "0=require('foo'); " + "var bar=require('bar');foo" + suffix + "0(bar);bar+1"); [EOL] } <line_num>: 60,70
public void testDefineOnlyFunction() { [EOL]     test("define(function() { return { test: 1 } })", "module.exports={test:1}"); [EOL]     test("define(function(exports, module) { return { test: 1 } })", "module.exports={test:1}"); [EOL] } <line_num>: 72,77
public void testObjectLit() { [EOL]     test("define({foo: 'bar'})", "exports={foo: 'bar'}"); [EOL] } <line_num>: 79,81
public void testPlugins() { [EOL]     test("define(['foo', 'text!foo'], function(foo, text) {})", "var foo = require('foo'); var text = null;", null, TransformAMDToCJSModule.REQUIREJS_PLUGINS_NOT_SUPPORTED_WARNING); [EOL]     test("define(['foo', 'text!foo?bar'], function(foo, bar) {})", "var foo = require('foo'); var bar = require('bar'); ", null, TransformAMDToCJSModule.REQUIREJS_PLUGINS_NOT_SUPPORTED_WARNING); [EOL]     test("define(['foo', 'text!foo?:bar'], function(foo, bar) {})", "var foo = require('foo'); var bar = null;", null, TransformAMDToCJSModule.REQUIREJS_PLUGINS_NOT_SUPPORTED_WARNING); [EOL] } <line_num>: 83,93
public void testUnsupportedForms() { [EOL]     testUnsupported("define()"); [EOL]     testUnsupported("define([], function() {}, 1)"); [EOL]     testUnsupported("define({}, function() {})"); [EOL]     testUnsupported("define('test', function() {})"); [EOL]     testUnsupported("define([])"); [EOL]     testUnsupported("define(true)"); [EOL]     testUnsupported("define(1)"); [EOL]     testNonTopLevelDefine("var x = define(function() {});"); [EOL]     testNonTopLevelDefine("if(define(function() {})) {}"); [EOL] } <line_num>: 95,105
public void testLocalDefine() { [EOL]     testSame("(function() { function define() {}; define({}); })()"); [EOL] } <line_num>: 107,109
private void testUnsupported(String js) { [EOL]     test(js, null, TransformAMDToCJSModule.UNSUPPORTED_DEFINE_SIGNATURE_ERROR); [EOL] } <line_num>: 111,113
private void testNonTopLevelDefine(String js) { [EOL]     test(js, null, TransformAMDToCJSModule.NON_TOP_LEVEL_STATEMENT_DEFINE_ERROR); [EOL] } <line_num>: 115,118
