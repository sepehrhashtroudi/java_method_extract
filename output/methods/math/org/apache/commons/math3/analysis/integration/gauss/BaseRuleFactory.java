public Pair<double[], double[]> getRule(int numberOfPoints) throws NotStrictlyPositiveException, DimensionMismatchException { [EOL]     if (numberOfPoints <= 0) { [EOL]         throw new NotStrictlyPositiveException(LocalizedFormats.NUMBER_OF_POINTS, numberOfPoints); [EOL]     } [EOL]     Pair<double[], double[]> cached = pointsAndWeightsDouble.get(numberOfPoints); [EOL]     if (cached == null) { [EOL]         final Pair<T[], T[]> rule = getRuleInternal(numberOfPoints); [EOL]         cached = convertToDouble(rule); [EOL]         pointsAndWeightsDouble.put(numberOfPoints, cached); [EOL]     } [EOL]     return new Pair<double[], double[]>(cached.getFirst().clone(), cached.getSecond().clone()); [EOL] } <line_num>: 55,80
protected synchronized Pair<T[], T[]> getRuleInternal(int numberOfPoints) throws DimensionMismatchException { [EOL]     final Pair<T[], T[]> rule = pointsAndWeights.get(numberOfPoints); [EOL]     if (rule == null) { [EOL]         addRule(computeRule(numberOfPoints)); [EOL]         return getRuleInternal(numberOfPoints); [EOL]     } [EOL]     return rule; [EOL] } <line_num>: 93,102
protected void addRule(Pair<T[], T[]> rule) throws DimensionMismatchException { [EOL]     if (rule.getFirst().length != rule.getSecond().length) { [EOL]         throw new DimensionMismatchException(rule.getFirst().length, rule.getSecond().length); [EOL]     } [EOL]     pointsAndWeights.put(rule.getFirst().length, rule); [EOL] } <line_num>: 111,118
protected abstract Pair<T[], T[]> computeRule(int numberOfPoints) throws DimensionMismatchException; <line_num>: 128,129
private static <T extends Number> Pair<double[], double[]> convertToDouble(Pair<T[], T[]> rule) { [EOL]     final T[] pT = rule.getFirst(); [EOL]     final T[] wT = rule.getSecond(); [EOL]     final int len = pT.length; [EOL]     final double[] pD = new double[len]; [EOL]     final double[] wD = new double[len]; [EOL]     for (int i = 0; i < len; i++) { [EOL]         pD[i] = pT[i].doubleValue(); [EOL]         wD[i] = wT[i].doubleValue(); [EOL]     } [EOL]     return new Pair<double[], double[]>(pD, wD); [EOL] } <line_num>: 139,153
