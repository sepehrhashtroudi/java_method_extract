public EventListenerSupport(final Class<L> listenerInterface) { [EOL]     this(listenerInterface, Thread.currentThread().getContextClassLoader()); [EOL] } <line_num>: 121,123
public EventListenerSupport(final Class<L> listenerInterface, final ClassLoader classLoader) { [EOL]     this(); [EOL]     Validate.notNull(listenerInterface, "Listener interface cannot be null."); [EOL]     Validate.notNull(classLoader, "ClassLoader cannot be null."); [EOL]     Validate.isTrue(listenerInterface.isInterface(), "Class {0} is not an interface", listenerInterface.getName()); [EOL]     initializeTransientFields(listenerInterface, classLoader); [EOL] } <line_num>: 138,145
private EventListenerSupport() { [EOL] } <line_num>: 151,152
public static <T> EventListenerSupport<T> create(final Class<T> listenerInterface) { [EOL]     return new EventListenerSupport<T>(listenerInterface); [EOL] } <line_num>: 105,107
public L fire() { [EOL]     return proxy; [EOL] } <line_num>: 162,164
public void addListener(final L listener) { [EOL]     Validate.notNull(listener, "Listener object cannot be null."); [EOL]     listeners.add(listener); [EOL] } <line_num>: 178,181
int getListenerCount() { [EOL]     return listeners.size(); [EOL] } <line_num>: 188,190
public void removeListener(final L listener) { [EOL]     Validate.notNull(listener, "Listener object cannot be null."); [EOL]     listeners.remove(listener); [EOL] } <line_num>: 200,203
public L[] getListeners() { [EOL]     return listeners.toArray(prototypeArray); [EOL] } <line_num>: 211,213
private void writeObject(final ObjectOutputStream objectOutputStream) throws IOException { [EOL]     final ArrayList<L> serializableListeners = new ArrayList<L>(); [EOL]     ObjectOutputStream testObjectOutputStream = new ObjectOutputStream(new ByteArrayOutputStream()); [EOL]     for (final L listener : listeners) { [EOL]         try { [EOL]             testObjectOutputStream.writeObject(listener); [EOL]             serializableListeners.add(listener); [EOL]         } catch (final IOException exception) { [EOL]             testObjectOutputStream = new ObjectOutputStream(new ByteArrayOutputStream()); [EOL]         } [EOL]     } [EOL]     objectOutputStream.writeObject(serializableListeners.toArray(prototypeArray)); [EOL] } <line_num>: 220,239
private void readObject(final ObjectInputStream objectInputStream) throws IOException, ClassNotFoundException { [EOL]     @SuppressWarnings("unchecked") [EOL]     final L[] listeners = (L[]) objectInputStream.readObject(); [EOL]     this.listeners = new CopyOnWriteArrayList<L>(listeners); [EOL]     @SuppressWarnings("unchecked") [EOL]     final Class<L> listenerInterface = (Class<L>) listeners.getClass().getComponentType(); [EOL]     initializeTransientFields(listenerInterface, Thread.currentThread().getContextClassLoader()); [EOL] } <line_num>: 247,259
private void initializeTransientFields(final Class<L> listenerInterface, final ClassLoader classLoader) { [EOL]     @SuppressWarnings("unchecked") [EOL]     final L[] array = (L[]) Array.newInstance(listenerInterface, 0); [EOL]     this.prototypeArray = array; [EOL]     createProxy(listenerInterface, classLoader); [EOL] } <line_num>: 266,272
private void createProxy(final Class<L> listenerInterface, final ClassLoader classLoader) { [EOL]     proxy = listenerInterface.cast(Proxy.newProxyInstance(classLoader, new Class[] { listenerInterface }, createInvocationHandler())); [EOL] } <line_num>: 279,282
protected InvocationHandler createInvocationHandler() { [EOL]     return new ProxyInvocationHandler(); [EOL] } <line_num>: 289,291
@Override [EOL] public Object invoke(final Object proxy, final Method method, final Object[] args) throws Throwable { [EOL]     for (final L listener : listeners) { [EOL]         method.invoke(listener, args); [EOL]     } [EOL]     return null; [EOL] } <line_num>: 310,316
