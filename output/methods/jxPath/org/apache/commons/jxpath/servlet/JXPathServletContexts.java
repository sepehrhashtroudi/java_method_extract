public static JXPathContext getPageContext(PageContext pageContext) { [EOL]     JXPathContext context = (JXPathContext) pageContext.getAttribute(Constants.JXPATH_CONTEXT); [EOL]     if (context == null) { [EOL]         JXPathContext parentContext = getRequestContext(pageContext.getRequest(), pageContext.getServletContext()); [EOL]         context = factory.newContext(parentContext, pageContext); [EOL]         context.setVariables(new KeywordVariables(Constants.PAGE_SCOPE, new PageScopeContext(pageContext))); [EOL]         pageContext.setAttribute(Constants.JXPATH_CONTEXT, context); [EOL]     } [EOL]     return context; [EOL] } <line_num>: 94,110
public static JXPathContext getRequestContext(ServletRequest request, ServletContext servletContext) { [EOL]     JXPathContext context = (JXPathContext) request.getAttribute(Constants.JXPATH_CONTEXT); [EOL]     if (context != null) { [EOL]         ServletRequestAndContext handle = (ServletRequestAndContext) context.getContextBean(); [EOL]         if (handle.getServletRequest() == request) { [EOL]             return context; [EOL]         } [EOL]     } [EOL]     JXPathContext parentContext = null; [EOL]     if (request instanceof HttpServletRequest) { [EOL]         HttpSession session = ((HttpServletRequest) request).getSession(false); [EOL]         if (session != null) { [EOL]             parentContext = getSessionContext(session, servletContext); [EOL]         } else { [EOL]             parentContext = getApplicationContext(servletContext); [EOL]         } [EOL]     } [EOL]     ServletRequestAndContext handle = new ServletRequestAndContext(request, servletContext); [EOL]     context = factory.newContext(parentContext, handle); [EOL]     context.setVariables(new KeywordVariables(Constants.REQUEST_SCOPE, handle)); [EOL]     request.setAttribute(Constants.JXPATH_CONTEXT, context); [EOL]     return context; [EOL] } <line_num>: 116,151
public static JXPathContext getSessionContext(HttpSession session, ServletContext servletContext) { [EOL]     JXPathContext context = (JXPathContext) session.getAttribute(Constants.JXPATH_CONTEXT); [EOL]     if (context == null) { [EOL]         JXPathContext parentContext = getApplicationContext(servletContext); [EOL]         HttpSessionAndServletContext handle = new HttpSessionAndServletContext(session, servletContext); [EOL]         context = factory.newContext(parentContext, handle); [EOL]         context.setVariables(new KeywordVariables(Constants.SESSION_SCOPE, handle)); [EOL]         session.setAttribute(Constants.JXPATH_CONTEXT, context); [EOL]     } [EOL]     return context; [EOL] } <line_num>: 157,173
public static JXPathContext getApplicationContext(ServletContext servletContext) { [EOL]     JXPathContext context = (JXPathContext) servletContext.getAttribute(Constants.JXPATH_CONTEXT); [EOL]     if (context == null) { [EOL]         context = factory.newContext(null, servletContext); [EOL]         context.setVariables(new KeywordVariables(Constants.APPLICATION_SCOPE, servletContext)); [EOL]         servletContext.setAttribute(Constants.JXPATH_CONTEXT, context); [EOL]     } [EOL]     return context; [EOL] } <line_num>: 179,194
