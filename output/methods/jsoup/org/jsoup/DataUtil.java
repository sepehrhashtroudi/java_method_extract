static String load(File in, String charsetName) throws IOException { [EOL]     InputStream inStream = new FileInputStream(in); [EOL]     String data = readInputStream(inStream, charsetName); [EOL]     inStream.close(); [EOL]     return data; [EOL] } <line_num>: 22,27
static String load(URL url, int timeoutMillis) throws IOException { [EOL]     String protocol = url.getProtocol(); [EOL]     Validate.isTrue(protocol.equals("http") || protocol.equals("https"), "Only http & https protocols supported"); [EOL]     HttpURLConnection conn = (HttpURLConnection) url.openConnection(); [EOL]     conn.setInstanceFollowRedirects(true); [EOL]     conn.setConnectTimeout(timeoutMillis); [EOL]     conn.setReadTimeout(timeoutMillis); [EOL]     conn.connect(); [EOL]     int res = conn.getResponseCode(); [EOL]     if (res != HttpURLConnection.HTTP_OK) [EOL]         throw new IOException(res + " error loading URL " + url.toString()); [EOL]     String contentType = conn.getContentType(); [EOL]     if (contentType == null || !contentType.startsWith("text/")) [EOL]         throw new IOException(String.format("Unhandled content type \"%s\" on URL %s. Must be text/*", contentType, url.toString())); [EOL]     InputStream inStream = new BufferedInputStream(conn.getInputStream()); [EOL]     String charSet = "UTF-8"; [EOL]     String data = readInputStream(inStream, charSet); [EOL]     inStream.close(); [EOL]     return data; [EOL] } <line_num>: 36,61
private static String readInputStream(InputStream inStream, String charsetName) throws IOException { [EOL]     char[] buffer = new char[0x20000]; [EOL]     StringBuilder data = new StringBuilder(0x20000); [EOL]     Reader inReader = new InputStreamReader(inStream, charsetName); [EOL]     int read; [EOL]     do { [EOL]         read = inReader.read(buffer, 0, buffer.length); [EOL]         if (read > 0) { [EOL]             data.append(buffer, 0, read); [EOL]         } [EOL]     } while (read >= 0); [EOL]     return data.toString(); [EOL] } <line_num>: 63,77
