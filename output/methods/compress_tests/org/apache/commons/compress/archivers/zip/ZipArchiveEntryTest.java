public ZipArchiveEntryTest(String name) { [EOL]     super(name); [EOL] } <line_num>: 29,31
public void testExtraFields() { [EOL]     AsiExtraField a = new AsiExtraField(); [EOL]     a.setDirectory(true); [EOL]     a.setMode(0755); [EOL]     UnrecognizedExtraField u = new UnrecognizedExtraField(); [EOL]     u.setHeaderId(new ZipShort(1)); [EOL]     u.setLocalFileDataData(new byte[0]); [EOL]     ZipArchiveEntry ze = new ZipArchiveEntry("test/"); [EOL]     ze.setExtraFields(new ZipExtraField[] { a, u }); [EOL]     byte[] data1 = ze.getExtra(); [EOL]     ZipExtraField[] result = ze.getExtraFields(); [EOL]     assertEquals("first pass", 2, result.length); [EOL]     assertSame(a, result[0]); [EOL]     assertSame(u, result[1]); [EOL]     UnrecognizedExtraField u2 = new UnrecognizedExtraField(); [EOL]     u2.setHeaderId(new ZipShort(1)); [EOL]     u2.setLocalFileDataData(new byte[] { 1 }); [EOL]     ze.addExtraField(u2); [EOL]     byte[] data2 = ze.getExtra(); [EOL]     result = ze.getExtraFields(); [EOL]     assertEquals("second pass", 2, result.length); [EOL]     assertSame(a, result[0]); [EOL]     assertSame(u2, result[1]); [EOL]     assertEquals("length second pass", data1.length + 1, data2.length); [EOL]     UnrecognizedExtraField u3 = new UnrecognizedExtraField(); [EOL]     u3.setHeaderId(new ZipShort(2)); [EOL]     u3.setLocalFileDataData(new byte[] { 1 }); [EOL]     ze.addExtraField(u3); [EOL]     result = ze.getExtraFields(); [EOL]     assertEquals("third pass", 3, result.length); [EOL]     ze.removeExtraField(new ZipShort(1)); [EOL]     byte[] data3 = ze.getExtra(); [EOL]     result = ze.getExtraFields(); [EOL]     assertEquals("fourth pass", 2, result.length); [EOL]     assertSame(a, result[0]); [EOL]     assertSame(u3, result[1]); [EOL]     assertEquals("length fourth pass", data2.length, data3.length); [EOL]     try { [EOL]         ze.removeExtraField(new ZipShort(1)); [EOL]         fail("should be no such element"); [EOL]     } catch (java.util.NoSuchElementException nse) { [EOL]     } [EOL] } <line_num>: 36,84
public void testExtraFieldMerging() { [EOL]     AsiExtraField a = new AsiExtraField(); [EOL]     a.setDirectory(true); [EOL]     a.setMode(0755); [EOL]     UnrecognizedExtraField u = new UnrecognizedExtraField(); [EOL]     u.setHeaderId(new ZipShort(1)); [EOL]     u.setLocalFileDataData(new byte[0]); [EOL]     ZipArchiveEntry ze = new ZipArchiveEntry("test/"); [EOL]     ze.setExtraFields(new ZipExtraField[] { a, u }); [EOL]     ze.setCentralDirectoryExtra(new byte[] { 1, 0, 1, 0, 127 }); [EOL]     ZipExtraField[] result = ze.getExtraFields(); [EOL]     assertEquals("first pass", 2, result.length); [EOL]     assertSame(a, result[0]); [EOL]     assertEquals(new ZipShort(1), result[1].getHeaderId()); [EOL]     assertEquals(new ZipShort(0), result[1].getLocalFileDataLength()); [EOL]     assertEquals(new ZipShort(1), result[1].getCentralDirectoryLength()); [EOL]     ze.setCentralDirectoryExtra(new byte[] { 2, 0, 0, 0 }); [EOL]     result = ze.getExtraFields(); [EOL]     assertEquals("second pass", 3, result.length); [EOL]     ze.setExtra(new byte[] { 2, 0, 1, 0, 127 }); [EOL]     result = ze.getExtraFields(); [EOL]     assertEquals("third pass", 3, result.length); [EOL]     assertSame(a, result[0]); [EOL]     assertEquals(new ZipShort(2), result[2].getHeaderId()); [EOL]     assertEquals(new ZipShort(1), result[2].getLocalFileDataLength()); [EOL]     assertEquals(new ZipShort(0), result[2].getCentralDirectoryLength()); [EOL] } <line_num>: 89,128
public void testAddAsFirstExtraField() { [EOL]     AsiExtraField a = new AsiExtraField(); [EOL]     a.setDirectory(true); [EOL]     a.setMode(0755); [EOL]     UnrecognizedExtraField u = new UnrecognizedExtraField(); [EOL]     u.setHeaderId(new ZipShort(1)); [EOL]     u.setLocalFileDataData(new byte[0]); [EOL]     ZipArchiveEntry ze = new ZipArchiveEntry("test/"); [EOL]     ze.setExtraFields(new ZipExtraField[] { a, u }); [EOL]     byte[] data1 = ze.getExtra(); [EOL]     UnrecognizedExtraField u2 = new UnrecognizedExtraField(); [EOL]     u2.setHeaderId(new ZipShort(1)); [EOL]     u2.setLocalFileDataData(new byte[] { 1 }); [EOL]     ze.addAsFirstExtraField(u2); [EOL]     byte[] data2 = ze.getExtra(); [EOL]     ZipExtraField[] result = ze.getExtraFields(); [EOL]     assertEquals("second pass", 2, result.length); [EOL]     assertSame(u2, result[0]); [EOL]     assertSame(a, result[1]); [EOL]     assertEquals("length second pass", data1.length + 1, data2.length); [EOL]     UnrecognizedExtraField u3 = new UnrecognizedExtraField(); [EOL]     u3.setHeaderId(new ZipShort(2)); [EOL]     u3.setLocalFileDataData(new byte[] { 1 }); [EOL]     ze.addAsFirstExtraField(u3); [EOL]     result = ze.getExtraFields(); [EOL]     assertEquals("third pass", 3, result.length); [EOL]     assertSame(u3, result[0]); [EOL]     assertSame(u2, result[1]); [EOL]     assertSame(a, result[2]); [EOL] } <line_num>: 133,166
public void testUnixMode() { [EOL]     ZipArchiveEntry ze = new ZipArchiveEntry("foo"); [EOL]     assertEquals(0, ze.getPlatform()); [EOL]     ze.setUnixMode(0755); [EOL]     assertEquals(3, ze.getPlatform()); [EOL]     assertEquals(0755, (ze.getExternalAttributes() >> 16) & 0xFFFF); [EOL]     assertEquals(0, ze.getExternalAttributes() & 0xFFFF); [EOL]     ze.setUnixMode(0444); [EOL]     assertEquals(3, ze.getPlatform()); [EOL]     assertEquals(0444, (ze.getExternalAttributes() >> 16) & 0xFFFF); [EOL]     assertEquals(1, ze.getExternalAttributes() & 0xFFFF); [EOL]     ze = new ZipArchiveEntry("foo/"); [EOL]     assertEquals(0, ze.getPlatform()); [EOL]     ze.setUnixMode(0777); [EOL]     assertEquals(3, ze.getPlatform()); [EOL]     assertEquals(0777, (ze.getExternalAttributes() >> 16) & 0xFFFF); [EOL]     assertEquals(0x10, ze.getExternalAttributes() & 0xFFFF); [EOL]     ze.setUnixMode(0577); [EOL]     assertEquals(3, ze.getPlatform()); [EOL]     assertEquals(0577, (ze.getExternalAttributes() >> 16) & 0xFFFF); [EOL]     assertEquals(0x11, ze.getExternalAttributes() & 0xFFFF); [EOL] } <line_num>: 168,196
